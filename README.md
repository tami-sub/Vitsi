# Vitsi
В условиях доминирования развлекательно-коммуникационных приложений основанных на видеоконтенте на рынке мобильных приложений, ниша с использованием аудио контента остаётся относительно не занятой и потенциально интересной для внедрения различных решений. Итак, в качестве объекта передачи информации был выбран аудио файл из-за того, что он занимает в разы меньше серверного пространства, которое ограничено финансовыми возможностями, чем, например видеофайл. Использование аудиозаписей оправдано также и тем, что пользователю для полного использования функционала приложения необходимо лишь предоставить доступ к микрофону мобильного устройства и иметь доступ в сеть интернет.
Основные технологии, используемые для реализации прототипа
Во время всего процесса разработки мобильного приложения в качестве дипломной работы, основным языком программирования был Kotlin, так как это язык высокого уровня, позволяющий создавать короткие синтаксические конструкции необходимые для взаимодействия с компонентами и виджетами.
Язык программирования Kotlin был выбран предпочтительным для разработки мобильных приложений под операционную систему Android компанией Google в 2019 году. При этом новые библиотеки Jetpack теперь публикуются в первую очередь под Kotlin. Kotlin как и Java является статически типизированным языком программирования и базируется на использовании JVM, то есть код написанный на Kotlin компилируется в байт код JVM. Таким образом на языке Kotlin нельзя написать такой код, который нельзя было бы воспроизвести по функционалу в Java. Однако в отличие от Java в языке программирования Kotlin имеется ряд нововведений, которые упрощают взаимодействие с данными и процесс написания кода: классы данных, сопрограммы, null-безопасность, функции расширения и многое другое.[1]
В качестве архитектуры приложения выбор был сделан в сторону использования клиент-серверного подхода ввиду специфики выпускной квалификационной работы. 
Для хранения значительного количества данных и облегчения нагрузки на мобильное приложение было принято решение использовать сервис Firebase от компании Google. Firebase – это платформа, состоящая из множества полезных для разработки мобильного приложения сервисов, таких как облачное хранилище данных (Firebase Storage), облачная база данных (Firebase Realtime Database), сервис для авторизации и аутентификации (Firebase Authentication), сервис для аналитики (Firebase analytics) и т.д. [2] Таким образом, Firebase отлично подходит в качестве реализации серверной части.
В качестве архитектуры для клиентской части выбрано одномодульное приложение с применением архитектурного шаблона MVVM.
MVVM состоит из:
•	Model – модели хранят логику взаимодействия с данными. Как правило, это простые классы, работающие в API, базами данных и т. д.
•	View – содержит код связанный непосредственно с интерфейсом, отображают визуальные элементы и элементы управления (текстовые поля, поля для ввода, кнопки)
•	ViewModel – это слой находящийся между слоями View и Model. Он отвечает за изменение данных в model, а также предоставляет данные для View [3]
Также необходимо отметить основные библиотеки, используемые в мобильном приложении:
•	MediaRecorder – это класс позволяющий записывать медиа файлы (аудио и видео файлы) в различных выходных форматах, которые поддерживает операционная система Android, например 3GP или MP4. [4]
•	ExoPlayer – это медиа плеер, работающий на уровне приложения Android. Он позволяет проигрывать медиа файлы, а именно аудио и видео достаточно просто как локально, так и из интернета. [5]
Сценарий использования мобильного приложения
Пользователь скачивает приложение и открывает его. Во время запуска приложения появляется Splash Screen на котором показывается логотип приложения. 
После этого незарегистрированный пользователь попадает на главную страницу, на которой он может прослушивать существующие аудиозаписи других пользователей. Незарегистрированный пользователь может перейти на экран аутентификации с помощью нижнего меню навигации, пункт Me. Таким образом, произойдет перенаправление в пункт назначения ProfileWithoutAccountFragment.
На экране ProfileWithoutAccountFragment рис. 1. можно увидеть кнопку авторизации, после нажатия на которую откроется экран регистрации нового пользователя SignUpFragment.
 
Рис. 1. Splash Screen, главный экран и экран аутентификации
Ниже можно увидеть экран регистрации рис. 2 SignUpFragment, где располагаются кнопки Sign Up и Log in. Нажатие на кнопку Log in перенаправит на фрагмент авторизации и позволит авторизоваться, если у него имеется профиль.
Однако в случае нажатия кнопки Sign Up незарегистрированный пользователь увидит диалоговое окно, в котором можно зарегистрировать новый профиль в приложении, используя Google аккаунт.
 
Рис. 2. Экран регистрации и диалоговое окно регистрации 
Сразу после регистрации полностью доступны вкладки нижнего меню рис. 3.
 
Рис. 3. меню навигации: Home, Create Audio, Chat, Me
Также после выбора Google аккаунта происходит перенаправление на экран создания никнейма нового пользователя.
После введения никнейма и нажатия на кнопку Sign Up происходит сохранение никнейма в облачной базе данных Firebase Realtime Database и перенаправление на ProfileWithAccountFragment.
Теперь пользователь может видеть свой профиль с изображением Google аккаунта, выбранным никнеймом и общим количеством лайков. На изображении рис. 4. можно увидеть экран фрагмента ProfileWithAccountFragment. 
 
Рис. 4. Экран создания никнейма пользователя и профиль созданного пользователя
Рассмотрим теперь нажатие на вкладку Create Audio только что зарегистрированного пользователя. Ниже можно увидеть экран создания аудиозаписи AudioFragment рис. 5., где располагается две кнопки START и STOP.
При нажатии на активную кнопку START появляется диалоговое окно, запрашивающее разрешение на использование микрофона мобильного устройства, которое можно увидеть на изображении ниже.
Далее при согласии с запросом на использование разрешения RECORD_AUDIO начинается запись аудиофайла с помощью MediaRecorder. Сразу же после остановки записи происходит перенаправление на фрагмент публикации аудиозаписи PostAudioFragment.
На экране публикации пользователь может добавить произвольное описание, а также хештеги.
 
Рис. 5. Экран создания аудиофайла, диалоговое окно с получением разрешения и экран добавления описания и опубликования аудиозаписи
И в конце рассмотрим нажатие на вкладку Chat зарегистрированного пользователя. Ниже можно увидеть фрагмент ChatFragment, отображающий всех зарегистрированных пользователей мобильного приложения рис. 6. При выборе определенного пользователя из списка доступных, текущий пользователь перенаправляется на фрагмент с чатом OneToOneChatFragment, в котором он может отправлять и получать текстовые сообщения.
 
Рис. 6. Экран со списком пользователей и экран с чатом и историей сообщений конкретного пользователя
Заключение
Перечислим перспективные технологии для расширения функционала:
Yandex Speech Kit – это сервис позволяющий распознавать аудиофайлы и получать расшифрованные текстовые данные отправленного аудиофайла. Взаимодействие с Yandex Speech Kit происходит с помощью API запросов, в тело которых помещается ссылка на записанный пользователем аудиофайл. Расшифрованный текст можно сохранять, например, в поле description соответствующей аудиозаписи в облачной базе данных.
MaxDiameterClustering – это алгоритм кластеризации коротких текстов, разработанный командой разработчиков из компании X5 Retail Group, помогающий понять к какой тематике относятся рассматриваемые тексты.  Алгоритм состоит в том, что необходимо добавлять фразы по одной, затем каждой новой фразе находится максимальное расстояние до каждого из существующих кластеров. Если есть кластер, максимальное расстояние до которого меньше порога, добавляем новую фразу к нему, если нет, то создаём новый кластер.
Также стоит отметить, что распознанный текст — это, по сути, готовый Body для отправки запроса к Image Search API Google или Yandex, например с помощью сервиса SerpApi. Таким образом мы получаем ссылки на ассоциированные с шуткой картинки и можем отображать их пользователю во время прослушивания аудиозаписи.
В ходе выполнения работы был реализован прототип коммуникационного мобильного приложения для создания и прослушивания коротких аудио. Спроектированное мобильное приложение позволяет создавать аудиозаписи и делиться своими шутками и идеями с остальными пользователями, а также общаться с пользователями мобильного приложения посредством внутреннего чата приложения. Также описаны перспективные технологии для дальнейшего расширения функционала приложения.
Литература
1.	Солонько, Максим Константинович. "Язык программирования KOTLIN." Вестник науки и образования 7-1 (85) (2020).
2.	Павлов, М. В. "АКТУАЛЬНОСТЬ ИСПОЛЬЗОВАНИЯ FIREBASE (NOSQL-СУБД) ДЛЯ РАЗВЕРТЫВАНИЯ МОБИЛЬНЫХ ПРИЛОЖЕНИЙ." Россия молодая. 2021.
3.	Akhtar, Nayab, and Sana Ghafoor. "Analysis of Architectural Patterns for Android Development." (2021).
4.	Официальный сайт Android документации, раздел об MediaRecoder [Электронный ресурс] - URL: - https://developer.android.com/guide/topics/media/mediarecorder (Дата обращения: 14.04.2022)
5.	Официальный репозиторий ExoPlayer, документация [Электронный ресурс] - URL: - https://developer.android.com/reference/android/widget/EditText (Дата обращения: 14.04.2022)

That's pretty good
